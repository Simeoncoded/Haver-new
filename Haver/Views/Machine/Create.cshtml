    @model haver.Models.Machine

    @{
        ViewData["Title"] = "Create Machine";
    }

    <div class="container-fluid bg-light">
        <!-- Header -->
        <div class="row">
            <div class="col-md-12 py-4" style="background-color:#0C2340;">
                <h4 class="text-white" style="font-family: 'Avenir Heavy', sans-serif; font-size: 19px;">
                    Create New Machine
                </h4>
            </div>
        </div>
    <partial name="_addMachineTypeModal" />
        <!-- Centered Form -->
        <div class="row py-4">
            <div class="col-md-10 offset-md-1">
                <form asp-action="Create" class="border p-4 shadow-sm" aria-label="Create Machine">
                    <div asp-validation-summary="ModelOnly" class="text-danger"></div>
                    <h6 class="mb-4" style="color: #0C2340;"><b>Fields marked with <span class="text-danger">*</span> are required</b></h6>

                    <!-- First Row -->
                    <div class="row">
                        <!-- Machine Type -->
                    <div class="form-group col-md-4 mb-3">
                       @*   <label asp-for="MachineTypeID" class="control-label" style="font-family: 'Avenir Roman', sans-serif; color:#0C2340;">
                             @Html.DisplayNameFor(model => model.MachineTypeID)  <span class="text-danger">*</span>
                             <i class="fas fa-info-circle" data-bs-toggle="tooltip" title="Select the machine model"></i>
                         </label>

                         <div class="input-group">
                             <select asp-for="MachineTypeID" class="form-control" asp-items="ViewBag.MachineTypeID">
                                 <option value="">Select Machine Model</option>
                             </select>
                             <button class="btn btn-outline-secondary" id="nowAddMachineType" data-bs-toggle="modal" data-bs-target="#addMachineTypeModal" type="button">
                                 &#x2795;
                             </button>
                         </div>

                         <span asp-validation-for="MachineTypeID" class="text-danger d-block mt-1"></span> *@
                        @* <label asp-for="MachineTypeID" class="control-label" style="font-family: 'Avenir Roman', sans-serif; color:#0C2340;">
                        <span class="text-danger">*</span> @Html.DisplayNameFor(model => model.MachineTypeID)
                        <i class="fas fa-info-circle" data-bs-toggle="tooltip" title="Associated sales order"></i>
                        </label>
                        <select asp-for="MachineTypeID" class="form-control"
                        style="border-color:#0C2340; font-family: 'Avenir Roman', sans-serif;"
                        asp-items="ViewBag.MachineTypeID"></select> *@

                        <label asp-for="MachineModel" class="control-label" style="font-family: 'Avenir Roman', sans-serif; color:#0C2340;">
                            @Html.DisplayNameFor(model => model.MachineModel)
                        </label>
                        <input asp-for="MachineModel" class="form-control" placeholder="Enter Class - Size x Deck"
                               style="border-color:#0C2340; font-family: 'Avenir Roman', sans-serif;" />
                        <span asp-validation-for="MachineModel" class="text-danger"></span>
                    </div>
       
                    
                  

                        <!-- Sales Order -->
                        <div class="form-group col-md-4 mb-3">
                            <label asp-for="SalesOrderID" class="control-label" style="font-family: 'Avenir Roman', sans-serif; color:#0C2340;">
                                @Html.DisplayNameFor(model => model.SalesOrderID)  <span class="text-danger">*</span>
                                <i class="fas fa-info-circle" data-bs-toggle="tooltip" title="Associated sales order"></i>
                            </label>
                            <select asp-for="SalesOrderID" class="form-control"
                                    style="border-color:#0C2340; font-family: 'Avenir Roman', sans-serif;"
                                    asp-items="ViewBag.SalesOrderID">
                            <option value="" disabled selected>Select Sales Order</option>
                        </select>
                        <span asp-validation-for="SalesOrderID" class="text-danger d-block mt-1"></span>
                        </div>

                        <!-- Serial Number -->
                        <div class="form-group col-md-4 mb-3">
                            <label asp-for="SerialNumber" class="control-label" style="font-family: 'Avenir Roman', sans-serif; color:#0C2340;">
                                <span class="text-danger">*</span> @Html.DisplayNameFor(model => model.SerialNumber)
                            </label>
                            <input asp-for="SerialNumber" class="form-control" placeholder="Enter Serial Number"
                                   style="border-color:#0C2340; font-family: 'Avenir Roman', sans-serif;" />
                            <span asp-validation-for="SerialNumber" class="text-danger"></span>
                        </div>
                    </div>

                    <!-- Second Row -->
                    <div class="row">
                    <!-- RToShipExp -->
                    <div class="form-group col-md-4 mb-3">
                        <label asp-for="RToShipExp" class="control-label" style="font-family: 'Avenir Roman', sans-serif; color:#0C2340;">
                            @Html.DisplayNameFor(model => model.RToShipExp)  <span class="text-danger">*</span>
                            <i class="fas fa-info-circle" data-bs-toggle="tooltip" title="Expected shipping date"></i>
                        </label>
                        <input asp-for="RToShipExp" class="form-control"
                               style="border-color:#0C2340; font-family: 'Avenir Roman', sans-serif;" />
                        <span asp-validation-for="RToShipExp" class="text-danger"></span>
                    </div>
                    <div class="form-group col-md-4 mb-3">
                        <label asp-for="AssemblyExp" class="control-label" style="font-family: 'Avenir Roman', sans-serif; color:#0C2340;">
                            @Html.DisplayNameFor(model => model.AssemblyExp)  <span class="text-danger">*</span>
                            <i class="fas fa-info-circle" data-bs-toggle="tooltip" title="Assembly Expected Date"></i>
                        </label>
                        <input asp-for="AssemblyExp" class="form-control"
                               style="border-color:#0C2340; font-family: 'Avenir Roman', sans-serif;" />
                        <span asp-validation-for="AssemblyExp" class="text-danger"></span>
                    </div>
                        <!-- Production Order -->
                        <div class="form-group col-md-4 mb-3">
                            <label asp-for="ProductionOrderNumber" class="control-label" style="font-family: 'Avenir Roman', sans-serif; color:#0C2340;">
                                 @Html.DisplayNameFor(model => model.ProductionOrderNumber)
                            </label>
                            <input asp-for="ProductionOrderNumber" class="form-control" placeholder="Enter Production Order Number"
                                   style="border-color:#0C2340; font-family: 'Avenir Roman', sans-serif;" />
                            <span asp-validation-for="ProductionOrderNumber" class="text-danger"></span>
                        </div>

                      


                       
                    </div>

                <div class="row">

                    <!-- Nameplate -->
                    <div class="form-group col-md-4 mb-3">
                        <label asp-for="Nameplate" class="control-label" style="font-family: 'Avenir Roman', sans-serif; color:#0C2340;">
                            @Html.DisplayNameFor(model => model.Nameplate)
                        </label>
                        <select asp-for="Nameplate" class="form-control"
                                style="border-color:#0C2340; font-family: 'Avenir Roman', sans-serif;"
                                asp-items="Html.GetEnumSelectList<NamePlate>()"></select>
                        <span asp-validation-for="Nameplate" class="text-danger"></span>
                    </div>

                    <!-- RToShipA -->
                    <div class="form-group col-md-4 mb-3">
                        <label asp-for="RToShipA" class="control-label" style="font-family: 'Avenir Roman', sans-serif; color:#0C2340;">
                            @Html.DisplayNameFor(model => model.RToShipA)
                            <i class="fas fa-info-circle" data-bs-toggle="tooltip" title="Actual shipping date"></i>
                        </label>
                        <input asp-for="RToShipA" class="form-control"
                               style="border-color:#0C2340; font-family: 'Avenir Roman', sans-serif;" />
                        <span asp-validation-for="RToShipA" class="text-danger"></span>
                    </div>

                    <div class="form-group col-md-4 mb-3">
                        <label asp-for="AssemblyStart" class="control-label" style="font-family: 'Avenir Roman', sans-serif; color:#0C2340;">
                            @Html.DisplayNameFor(model => model.AssemblyStart)
                            <i class="fas fa-info-circle" data-bs-toggle="tooltip" title="Assembly Start Date"></i>
                        </label>
                        <input asp-for="AssemblyStart" class="form-control"
                               style="border-color:#0C2340; font-family: 'Avenir Roman', sans-serif;" />
                        <span asp-validation-for="AssemblyStart" class="text-danger"></span>
                    </div>


                    </div>

                <div class="form-group">
                    <label class="form-label">Select Options:</label>
                    <div class="row">
                        <div class="col-md-4">
                            <div class="form-check">
                                <input class="form-check-input" asp-for="Media"
                                       style="border-color:#0C2340;" />
                                <label class="form-check-label" style="font-family: 'Avenir Roman', sans-serif; color:#0C2340;">
                                    @Html.DisplayNameFor(model => model.Media)
                                </label>
                            </div>
                            <div class="form-check">
                                <input class="form-check-input" asp-for="SpareParts"
                                       style="border-color:#0C2340;" />
                                <label class="form-check-label" style="font-family: 'Avenir Roman', sans-serif; color:#0C2340;">
                                    @Html.DisplayNameFor(model => model.SpareParts)
                                </label>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="form-check">
                                <input class="form-check-input" asp-for="Base"
                                       style="border-color:#0C2340;" />
                                <label class="form-check-label" style="font-family: 'Avenir Roman', sans-serif; color:#0C2340;">
                                    @Html.DisplayNameFor(model => model.Base)
                                </label>
                            </div>
                            <div class="form-check">
                                <input class="form-check-input" asp-for="SparePMedia"
                                       style="border-color:#0C2340;" />
                                <label class="form-check-label" style="font-family: 'Avenir Roman', sans-serif; color:#0C2340;">
                                    @Html.DisplayNameFor(model => model.SparePMedia)
                                </label>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="form-check">
                                <input class="form-check-input" asp-for="AirSeal"
                                       style="border-color:#0C2340;" />
                                <label class="form-check-label" style="font-family: 'Avenir Roman', sans-serif; color:#0C2340;">
                                    @Html.DisplayNameFor(model => model.AirSeal)
                                </label>
                            </div>
                            <div class="form-check">
                                <input class="form-check-input" asp-for="CoatingLining"
                                       style="border-color:#0C2340;" />
                                <label class="form-check-label" style="font-family: 'Avenir Roman', sans-serif; color:#0C2340;">
                                    @Html.DisplayNameFor(model => model.CoatingLining)
                                </label>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="form-check">
                                <input class="form-check-input" asp-for="Disassembly"
                                       style="border-color:#0C2340;" />
                                <label class="form-check-label" style="font-family: 'Avenir Roman', sans-serif; color:#0C2340;">
                                    @Html.DisplayNameFor(model => model.Disassembly)
                                </label>
                            </div>

                        </div>
                    </div>
                </div>

                <!-- Third Row -->
                <div class="row">

                   

                   
                    <div class="form-group col-md-4 mb-3">
                        <label asp-for="AssemblyComplete" class="control-label" style="font-family: 'Avenir Roman', sans-serif; color:#0C2340;">
                             @Html.DisplayNameFor(model => model.AssemblyComplete)
                            <i class="fas fa-info-circle" data-bs-toggle="tooltip" title="Assembly Completed Date"></i>
                        </label>
                        <input asp-for="AssemblyComplete" class="form-control"
                               style="border-color:#0C2340; font-family: 'Avenir Roman', sans-serif;" />
                        <span asp-validation-for="AssemblyComplete" class="text-danger"></span>
                    </div>

                    <!-- Budgeted Hours -->
                    <div class="form-group col-md-4 mb-3">
                        <label asp-for="BudgetedHours" class="control-label" style="font-family: 'Avenir Roman', sans-serif; color:#0C2340;">
                            @Html.DisplayNameFor(model => model.BudgetedHours)
                        </label>
                        <input asp-for="BudgetedHours" class="form-control" placeholder="Enter Budgeted Hours"
                               style="border-color:#0C2340; font-family: 'Avenir Roman', sans-serif;" />
                        <span asp-validation-for="BudgetedHours" class="text-danger"></span>
                    </div>

                    <!-- Actual Hours -->
                    <div class="form-group col-md-4 mb-3">
                        <label asp-for="ActualAssemblyHours" class="control-label" style="font-family: 'Avenir Roman', sans-serif; color:#0C2340;">
                            @Html.DisplayNameFor(model => model.ActualAssemblyHours)
                        </label>
                        <input asp-for="ActualAssemblyHours" class="form-control" placeholder="Enter Actual Hours"
                               style="border-color:#0C2340; font-family: 'Avenir Roman', sans-serif;" />
                        <span asp-validation-for="ActualAssemblyHours" class="text-danger"></span>
                    </div>


                </div>

                    <!-- Third Row -->
                    <div class="row">
                       
                      
                        <!-- Rework Hours -->
                        <div class="form-group col-md-4 mb-3">
                            <label asp-for="ReworkHours" class="control-label" style="font-family: 'Avenir Roman', sans-serif; color:#0C2340;">
                                @Html.DisplayNameFor(model => model.ReworkHours)
                            </label>
                            <input asp-for="ReworkHours" class="form-control" placeholder="Enter Rework Hours"
                                   style="border-color:#0C2340; font-family: 'Avenir Roman', sans-serif;" />
                            <span asp-validation-for="ReworkHours" class="text-danger"></span>
                        </div>


                    </div>

               

                

                    <div class="row">
                        <!-- PreOrder -->
                        <div class="form-group col-md-6 mb-4">
                            <label asp-for="PreOrder" class="control-label" style="font-family: 'Avenir Roman', sans-serif; color:#0C2340;">
                                @Html.DisplayNameFor(model => model.PreOrder)
                                <i class="fas fa-info-circle" data-bs-toggle="tooltip" title="Pre-orders specifications"></i>
                            </label>
                            <textarea asp-for="PreOrder" class="form-control summernote"
                                      style="border-color:#0C2340; font-family: 'Avenir Roman', sans-serif;"></textarea>
                            <span asp-validation-for="PreOrder" class="text-danger"></span>
                        </div>

                        <!-- Scope -->
                        <div class="form-group col-md-6 mb-4">
                            <label asp-for="Scope" class="control-label" style="font-family: 'Avenir Roman', sans-serif; color:#0C2340;">
                                @Html.DisplayNameFor(model => model.Scope)
                                <i class="fas fa-info-circle" data-bs-toggle="tooltip" title="Scope details"></i>
                            </label>
                            <textarea asp-for="Scope" class="form-control summernote"
                                      style="border-color:#0C2340; font-family: 'Avenir Roman', sans-serif;"></textarea>
                            <span asp-validation-for="Scope" class="text-danger"></span>
                        </div>
                    </div>
               

                    <!-- Form Actions -->
                    <div class="form-group text-center">
                        <button type="submit" class="btn btn-primary mr-2"
                                style="background-color:#0C2340; border-color:#0C2340; font-family: 'Avenir Heavy', sans-serif;">
                            Next ➔
                        </button>
                        <a asp-action="Index" class="btn btn-secondary"
                           style="background-color:#6c757d; border-color:#6c757d; font-family: 'Avenir Heavy', sans-serif;">
                            <i class="fa fa-arrow-left" aria-hidden="true"></i> Back to List
                        </a>
                        <button type="button" class="btn" id="autofillButton">Test</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
@section Head {
    <link href="https://cdnjs.cloudflare.com/ajax/libs/summernote/0.8.18/summernote-bs4.min.css" rel="stylesheet">
}

@section Scripts {
    @{
        @await Html.PartialAsync("_ValidationScriptsPartial")
    }
    <script src="~/js/multiselect.js"></script>


    <script src="~/js/refreshDDL.js"></script>

    <!-- Select2 CSS -->
<link href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.13/css/select2.min.css" rel="stylesheet" />

<!-- jQuery (Required for Select2) -->
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

<!-- Select2 JS -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.13/js/select2.min.js"></script>


    <script type="text/javascript">
        $('#submitMachineTypeCreate').click(function (event) {
            event.preventDefault();
            ClearErrors();

            $.ajax({
                type: "POST",
                url: $('#createMachineTypeForm').attr('action'),
                data: $('#createMachineTypeForm').serialize(),
                success: function () {
                    $('#addMachineTypeModal').modal('hide');
                    $('body').removeClass('modal-open');
                    $('.modal-backdrop').remove();
                    setTimeout(function () {
                        refreshDDL('MachineTypeID', '/Machine/GetMachineTypes/', false, null, true, 'None', true);
                    }, 500);
                },
                error: function (xhr) {
                    var errorMessages = [];
                    switch (xhr.status) {
                        case 401:
                            errorMessages.push("You must be logged in first.");
                            break;
                        case 403:
                            errorMessages.push("You are not authorized for this action.");
                            break;
                        default:
                            errorMessages = xhr.responseText.split("|").slice(0, -1);
                    }
                    if (!errorMessages.some((str) => str !== "")) {
                        errorMessages.push("Error: Unable to complete operation");
                    }
                    var ul = document.getElementById("ErrorList");
                    for (var i = 0; i < errorMessages.length; i++) {
                        var li = document.createElement("li");
                        li.innerHTML = errorMessages[i];
                        ul.appendChild(li);
                    }
                }
            });
            return false;
        });
        $('#addMachineTypeModal').on('hide.bs.modal', function () {
            document.getElementById("createMachineTypeForm").reset();//to clear the data in the popup form
            ClearErrors();
            var selectedOption = $('#MachineTypeID').val();//Return to the current selected value
            refreshDDL('MachineTypeID', '/Machine/GetMachineTypes/' + selectedOption, false, null, true, 'None', true);
        });
        function ClearErrors() {
            //Empty out the list of validation errors if there are any
            var ul = document.getElementById("ErrorList");
            while (ul.firstChild) {
                ul.removeChild(ul.firstChild);
            }
        }
    </script>

   

    <script src="https://cdnjs.cloudflare.com/ajax/libs/summernote/0.8.18/summernote-bs4.min.js"></script>
    <!-- Summernote JS -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.4/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.1/umd/popper.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/4.6.2/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/summernote/0.8.18/summernote-bs4.min.js"></script>
    <script>
        $(document).ready(function () {
            $('.summernote').summernote({
                height: 150, // Set height for the editor
                toolbar: [
                    ['style', ['bold', 'italic', 'underline', 'clear']], // Text styles
                    ['font', ['color']], // Add color picker for text and background colors
                    ['para', ['ul', 'ol', 'paragraph']], // List and paragraph options
                    ['insert', ['link', 'picture', 'video']], // Insert options
                    ['view', ['fullscreen', 'codeview', 'help']] // View options
                ],
                colors: [
                    // Define a full range of colors
                    ['#000000', '#424242', '#636363', '#9C9C94', '#CEC6CE', '#EFEFEF', '#F7F7F7', '#FFFFFF'],
                    ['#FF0000', '#FF9C00', '#FFFF00', '#00FF00', '#00FFFF', '#0000FF', '#9C00FF', '#FF00FF'],
                    ['#F4CCCC', '#FCE5CD', '#FFF2CC', '#D9EAD3', '#D0E0E3', '#C9DAF8', '#CFE2F3', '#D9D2E9'],
                    ['#EA9999', '#F9CB9C', '#FFE599', '#B6D7A8', '#A2C4C9', '#A4C2F4', '#9FC5E8', '#B4A7D6'],
                    ['#E06666', '#F6B26B', '#FFD966', '#93C47D', '#76A5AF', '#6D9EEB', '#6FA8DC', '#8E7CC3'],
                    ['#CC0000', '#E69138', '#F1C232', '#6AA84F', '#45818E', '#3C78D8', '#3D85C6', '#674EA7'],
                    ['#990000', '#B45F06', '#BF9000', '#38761D', '#134F5C', '#1155CC', '#0B5394', '#351C75'],
                    ['#660000', '#783F04', '#7F6000', '#274E13', '#0C343D', '#1C4587', '#073763', '#20124D']
                ] // Custom color palette
            });
        });
    </script>
    <script type="text/javascript">
        var tooltipTriggerList = [].slice.call(document.querySelectorAll('[data-bs-toggle="tooltip"]'))
        var tooltipList = tooltipTriggerList.map(function (tooltipTriggerEl) {
            return new bootstrap.Tooltip(tooltipTriggerEl)
        })
    </script>



    <script>
        document.addEventListener('DOMContentLoaded', function () {
            // Autofill button handler
            document.getElementById('autofillButton').addEventListener('click', function (e) {
                e.preventDefault();

                // Input fields
                document.querySelector('#MachineModel').value = 'T-500 4 x 10 1D';
                document.querySelector('#SerialNumber').value = 'TEST-12345';
                document.querySelector('#ProductionOrderNumber').value = '0978341';

                // Date fields (format: YYYY-MM-DD)
                const nextWeek = new Date();
                nextWeek.setDate(nextWeek.getDate() + 7);
                document.querySelector('#RToShipExp').value = nextWeek.toISOString().split('T')[0];
                document.querySelector('#RToShipA').value = new Date().toISOString().split('T')[0];

                document.querySelector('#AssemblyExp').value = new Date().toISOString().split('T')[0];

                
                // Nameplate dropdown
                document.querySelector('#Nameplate').value = 'Yes';

                // Numeric fields
                document.querySelector('#BudgetedHours').value = 40;
                document.querySelector('#ActualAssemblyHours').value = 45;
                document.querySelector('#ReworkHours').value = 5;

                // Summernote fields (assuming you're using Summernote editor)
                $('#PreOrder').summernote('code', '<p>Test pre-order specifications</p>');
                $('#Scope').summernote('code', '<p>Test scope details</p>');
            });
        });

    </script>



}


